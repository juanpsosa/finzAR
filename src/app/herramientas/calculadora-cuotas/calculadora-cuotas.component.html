<section class="calculator-container">
  <div class="form-section">

    <!-- FORMULARIO PRINCIPAL -->

    <label class="form-label">
      <i class="icon">ğŸ’°</i> Â¿CuÃ¡nto sale al contado?
    </label>
    <input
      class="input-large"
      type="number"
      placeholder="$1.000"
      [(ngModel)]="contado"
      (ngModelChange)="calcular()" />

    <label class="form-label">
      <i class="icon">ğŸ’³</i> Â¿CuÃ¡nto sale en cuotas?
    </label>
    <input
      class="input-large"
      type="number"
      placeholder="$6.000"
      [(ngModel)]="cuotasTotal"
      (ngModelChange)="calcular()" />

    <div class="toggle-container">
      <label class="toggle-label">
        <input type="checkbox" [(ngModel)]="usarContado" />
        Usar precio al contado
      </label>
    </div>

    <label class="form-label">
      <i class="icon">#</i> Â¿CuÃ¡ntas cuotas?
    </label>
    <div class="cuotas-grid">
      <button
        *ngFor="let n of cuotasOpciones"
        (click)="setCuotas(n)"
        [class.selected]="cuotas === n"
        class="cuota-button">
        {{ n }}
      </button>

      <input
        type="number"
        class="cuota-custom-input"
        min="1"
        placeholder="Otra"
        [value]="otraCuota"
        (input)="handleOtraCuota($event)" />
    </div>

    <div class="info-line" *ngIf="cuotasTotal && cuotas">
      âœ¨ {{ cuotas }} cuotas de: ${{ (cuotasTotal / cuotas) | number:'1.2-2' }}
    </div>

    <details class="accordion">
      <summary>âš™ï¸ ConfiguraciÃ³n adicional</summary>
      <label class="form-label">
        <i class="icon">ğŸ“‰</i> Tasa de inflaciÃ³n mensual
      </label>
      <input
        class="input-large"
        type="number"
        [(ngModel)]="inflacion"
        (ngModelChange)="calcular()" />
      <p class="subinfo">InflaciÃ³n anual: 38.96% | INDEC: 2.78% (MAR 25)</p>
    </details>

    <!-- PANEL RESUMEN DESPLEGABLE -->
    <div class="resultado-panel" *ngIf="resultado">
      <div class="panel-header" (click)="expandido = !expandido">
        <span>{{ esMejorContado ? 'ğŸ’¸ CONTADO ES MEJOR' : 'ğŸ“ˆ CUOTAS SON MEJOR' }}</span>
        <span class="flecha">{{ expandido ? 'â–´' : 'â–¾' }}</span>
      </div>

      <div class="panel-body" [class.expandido]="expandido">
        <div class="panel-item tooltip-container">
          <span class="item-label">ğŸ“ˆ {{ (tasaInteres * 100) | number:'1.2-2' }}%</span>
          <span class="item-sub">
            Tasa de interÃ©s mensual implÃ­cita
            <span class="tooltip-icon">â“
              <span class="tooltip-text">
                Es la tasa que estÃ¡s pagando realmente por financiar. Si es menor a la inflaciÃ³n, las cuotas te benefician.
              </span>
            </span>
          </span>
        </div>

        <div class="panel-item highlight">
          <span class="item-label">ğŸ’µ ${{ contado | number:'1.2-2' }}</span>
          <span class="item-sub">Precio al contado</span>
        </div>

        <div class="panel-item">
          <span class="item-label">ğŸ’³ ${{ vpn | number:'1.2-2' }}</span>
          <span class="item-sub">Cuotas ajustadas por inflaciÃ³n</span>
        </div>

        <div class="panel-item">
          <span class="item-label">ğŸ“Š {{ cuotas }} Cuotas</span>
          <span class="item-sub">ExpandÃ­ para ver mÃ¡s</span>
        </div>

        <div class="panel-actions">
          <button class="action-btn cerrar" (click)="expandido = false">Cerrar</button>
          <button class="action-btn compartir" (click)="copiarResumen()">ğŸ”— Compartir</button>
        </div>
      </div>
    </div>

  </div>
</section>